#!/bin/bash

# File and binary locations
scriptdir="$(dirname $0)"
botconf="$scriptdir/bot.conf"
iibin="$scriptdir/bin/ii"
cmux="$scriptdir/bin/cmux"

# Grab the network, port, ssl, nick, password, remove extra whitespace
bconf=$(   cat  "$botconf" | awk '/^[^#]/')
netwk=$(   echo "$bconf"   | awk '/^network/ {print $3}')
port=$(    echo "$bconf"   | awk '/^port/ {print $3}')
usessl=$(  echo "$bconf"   | awk '/^ssl/ {print $3}')
botnick=$( echo "$bconf"   | awk '/^nick/ {print $3}')
botpass=$( echo "$bconf"   | awk '/^pass/ {print $3}')

# Future stuff
$iibin -i ./networks -s "$netwk" -n "$botnick" -f "$botnick" -p "$port" &
echo "ii $!" > .pid

$cmux&
